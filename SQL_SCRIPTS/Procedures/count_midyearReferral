DROP PROCEDURE IF EXISTS count_midyearReferral;
DELIMITER $$
CREATE PROCEDURE count_midyearReferral()
BEGIN 
SELECT P.Department_ID AS "Department",Count(T.Referral) AS "Number of Referrals"
 from patient AS P
 INNER JOIN treatment AS T
 WHERE T.TreatmentDate BETWEEN CONCAT(YEAR(NOW()),"-01-01") AND CONCAT(YEAR(NOW()),"-07-31");
 END$$
 DELIMITER ;
 
 CALL count_midyearReferral();
